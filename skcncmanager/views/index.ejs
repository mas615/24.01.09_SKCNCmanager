<!DOCTYPE html>
<html>
  <head>
    <title><%= title %></title>
    <link rel='stylesheet' href='/stylesheets/style.css' />
    
  </head>
  <body>
    <a href="/m/insert">프로젝트 관리대장</a><br><a href="/m/penetrationtest">모의해킹 종합</a><br>
    <h1><%= title %></h1>
    <script>
      function updateInputValue() {
        // 선택된 옵션의 값 가져오기
        var selectedOption = document.getElementById("selectOption");
        var selectedValue = selectedOption.options[selectedOption.selectedIndex].value;
  
        // Input 요소의 값을 선택된 값으로 변경
        var inputValueElement = document.getElementById("inputValue");
        inputValueElement.value = selectedValue;
        if (selectedValue === "A") {
          inputValueElement.value = "<%= 'A'+codefamily[2] %>";
        } else if (selectedValue === "B") {
          inputValueElement.value = "<%= 'B'+codefamily[3] %>";
        } else if (selectedValue === "C") {
          inputValueElement.value = "<%= 'C'+codefamily[4] %>";
        }else if (selectedValue === "D") {
          inputValueElement.value = "<%= 'D'+codefamily[5] %>";
        }else if (selectedValue === "E") {
          inputValueElement.value = "<%= 'E'+codefamily[6] %>";
        }else if (selectedValue === "F") {
          inputValueElement.value = "<%= 'F'+codefamily[7] %>";
        }
      }
    </script>
    <tr>
        <form action="/m/insert" method="post">
        <table border="1">
          <tr>
            <td>프로젝트코드</td>
            <td><input type="text" name="1" value="<%= 'P'+codefamily[0] %>"></td>
          </tr>
          <tr>
            <td>서비스코드</td>
            <td><input type="text" name="2" value="<%= 'S'+codefamily[1] %>"></td>
          </tr>
          <tr>
            <td>관리코드</td>
            <td><input type="text" name="3" id="inputValue" value="<%= 'A'+codefamily[2] %>"></td>
          </tr>
          <tr>
            <td>프로젝트명</td>
            <td><input type="text" name="4" placeholder="프로젝트 명" required></td>
          </tr>
          <tr>
            <td>신규 점검유형</td>
            <td>
              <select name="5" id="selectOption" onchange="updateInputValue()">
                <option value="A">A.신규Biz</option>
                <option value="B">B.그룹공통</option>
                <option value="C">C.대외인증</option>
                <option value="D">D.사내시스템</option>
                <option value="E">E.신규Biz정기</option>
                <option value="F">F.기타</option>
              </select>
            </td>
          </tr>
          <tr>
            <td>기존 점검유형</td>
            <td>
              <select name="6">
                <option value="A">A.신규Biz</option>
                <option value="B">B.그룹공통</option>
                <option value="C">C.대외인증</option>
                <option value="D">D.사내시스템</option>
                <option value="E">E.신규Biz정기</option>
                <option value="F">F.기타</option>
              </select>
            </td>
          </tr>
          <tr>
            <td>Open일</td>
            <td><input type="date" name="7" id="now_date"></td>
          </tr>
          <tr>
            <td>관계사 명</td>
            <td><input type="text" name="8" placeholder="관계사 명" required></td>
          </tr>
          <tr>
            <td>총괄 담당자</td>
            <td><input type="text" name="9" placeholder="담당업체" required><br>
            <input type="text" name="10" placeholder="담당부서" required><br>
            <input type="text" name="11" placeholder="담당자" required><br>
            <input type="text" name="12" placeholder="연락처" required></td>
          </tr>
          <tr>
            <td>실무 담당자</td>
            <td><input type="text" name="13" placeholder="담당업체" required><br>
            <input type="text" name="14" placeholder="담당부서" required><br>
            <input type="text" name="15" placeholder="담당자" required><br>
            <input type="text" name="16" placeholder="연락처" required></td>
          </tr>
          <tr>
            <td>모의해킹</td>
            <td><input type="radio" name="17" value="1" checked="cheked">O<input type="radio" name="17" value="0">X</td>
          </tr>
          <tr>
            <td>소스코드 진단</td>
            <td><input type="radio" name="18" value="1" checked="cheked">O<input type="radio" name="18" value="0">X</td>
          </tr>
          <tr>
            <td>인프라 진단</td>
            <td><input type="radio" name="19" value="1" checked="cheked">O<input type="radio" name="19" value="0">X</td>
          </tr>
          <tr>
            <td>비고</td>
            <td><input type="text" name="20" placeholder="비고"></td>
          </tr>
          <tr>
            <td>신규투자(회사)</td>
            <td><input type="radio" name="21" value="1" checked="cheked">O<input type="radio" name="21" value="0">X</td>
          </tr>
          <tr>
            <td>사업팀요청</td>
            <td><input type="radio" name="22" value="1" checked="cheked">O<input type="radio" name="22" value="0">X</td>
          </tr>
          <tr>
            <td>사내시스템</td>
            <td><input type="radio" name="23" value="1" checked="cheked">O<input type="radio" name="23" value="0">X</td>
          </tr>
          <tr>
            <td>대외인증</td>
            <td><input type="radio" name="24" value="1" checked="cheked">O<input type="radio" name="24" value="0">X</td>
          </tr>
          <tr>
            <td>그룹공통</td>
            <td><input type="radio" name="25" value="1" checked="cheked">O<input type="radio" name="25" value="0">X</td>
          </tr>
          <tr>
            <td>사업팀요청(관계사)</td>
            <td><input type="radio" name="26" value="1" checked="cheked">O<input type="radio" name="26" value="0">X</td>
          </tr>
          <tr>
            <td>멤버사진단</td>
            <td><input type="radio" name="27" value="1" checked="cheked">O<input type="radio" name="27" value="0">X</td>
          </tr>
          <tr>
            <td>23년 관리코드</td>
            <td><input type="text" name="28" value="OLD"></td>
          </tr>
          <tr>
            <td>23년 이관 여부</td>
            <td><input type="radio" name="29" value="1" checked="cheked">O<input type="radio" name="29" value="0">X</td>
          </tr>
        </table>
        <input type="submit">
        </form>
      </tr>
    <table border="1">
      <th>No</th>
      <th>1.<br>프로젝트코드</th>
      <th>2.<br>서비스코드</th>
      <th>3.<br>관리코드</th>
      <th>4.<br>프로젝트명</th>
      <th>5.<br>신규 점검유형</th>
      <th>6.<br>기존 점검유형</th>
      <th>7.<br>Opne일</th>
      <th>8.<br>관계사명</th>
      <th>9.<br>담당업체</th>
      <th>10.<br>담당부서</th>
      <th>11.<br>담당자</th>
      <th>12.<br>연락처</th>
      <th>13.<br>담당업체</th>
      <th>14.<br>담당부서</th>
      <th>15.<br>담당자</th>
      <th>16.<br>연락처</th>
      <th>17.<br>모의해킹</th>
      <th>18.<br>소스코드 진단</th>
      <th>19.<br>인프라 진단</th>
      <th>20.<br>비고</th>
      <th>21.<br>신규투자(회사)</th>
      <th>22.<br>사업팀요청(자체투자)</th>
      <th>23.<br>사내시스템</th>
      <th>24.<br>대외인증</th>
      <th>25.<br>그룹공통</th>
      <th>26.<br>사업팀요청(관계사)</th>
      <th>27.<br>멤버사진단</th>
      <th>28.<br>23년 관리코드</th>
      <th>29.<br>23년 이관 현황</th>
      
    <% for (const project of dbtest) { %>
      <tr>
        <td><%= project.seq %></td>
        <td><%= project.project_code %></td>
        <td><%= project.service_code %></td>
        <td><%= project.manage_code %></td>
        <td><%= project.project_name %></td>
        <td><%= project.new_inspectiontype %></td>
        <td><%= project.old_inspectiontype %></td>
        <td><%= formatDate(project.open_date) %></td>
        <td><%= project.relative_comp %></td>
        <td><%= project.comp1 %></td>
        <td><%= project.part1 %></td>
        <td><%= project.manager1 %></td>
        <td><%= project.manager1_phone %></td>
        <td><%= project.comp2 %></td>
        <td><%= project.part2 %></td>
        <td><%= project.manager2 %></td>
        <td><%= project.manager2_phone %></td>
        <td><%= project.pentest %></td>
        <td><%= project.source_code %></td>
        <td><%= project.infra %></td>
        <td><%= project.note %></td>
        <td><%= project.check1 %></td>
        <td><%= project.check2 %></td>
        <td><%= project.check3 %></td>
        <td><%= project.check4 %></td>
        <td><%= project.check5 %></td>
        <td><%= project.check6 %></td>
        <td><%= project.check7 %></td>
        <td><%= project.old_manage_code %></td>
        <td><%= project.old_project %></td>
      </tr>
    <% } %>
    <% function formatDate(dateString) {
      const date = new Date(dateString);
      const yy = date.getFullYear().toString().slice(-2);
      const mm = (date.getMonth() + 1).toString().padStart(2, '0');
      const dd = date.getDate().toString().padStart(2, '0');
      const dayOfWeek = date.toLocaleDateString('ko-KR', { weekday: 'short' });
      return `${yy}.${mm}.${dd}(${dayOfWeek})`;
    } %>
    </table>
    <script>document.getElementById('now_date').valueAsDate = new Date();</script>
  </body>
</html>
